(function(g){var b;g.fn.undoChanges=function(){b.undoChanges();return this};g.fn.updateChanges=function(){b.updateChanges();return this};g.fn.setEffect=function(J){b.setEffect(J);return this};g.fn.setTextAlign=function(J){b.setTextAlign(J);return this};g.fn.setCaptionType=function(J){b.setCaptionType(J);return this};g.fn.setThumbsAlign=function(J){b.setThumbsAlign(J);return this};g.fn.setPlayButton=function(J){b.setPlayButton(J);return this};g.fn.setDButtons=function(J){b.setDButtons(J);return this};g.fn.setImageNumber=function(J){b.setImageNumber(J);return this};g.fn.setTimerBar=function(J){b.setTimerBar(J);return this};g.fn.setThumbButtons=function(J){b.setThumbButtons(J);return this};g.fn.setThumbNumber=function(J){b.setThumbNumber(J);return this};g.fn.setIndexes=function(J){b.setIndexes(J);return this};g.fn.setSelectArrow=function(J){b.setSelectArrow(J);return this};g.fn.setMouseoverButtons=function(J){b.setMouseoverButtons(J);return this};g.fn.setMouseoverInfo=function(J){b.setMouseoverInfo(J);return this};g.fn.setMouseoverCaption=function(J){b.setMouseoverCaptions(J);return this};g.fn.setMouseoverText=function(J){b.setMouseoverText(J);return this};u.prototype.undoChanges=function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).width(0).data("pct",1);this._contThumbNav=true;this._moveBy1=false;this._autoStart=false;if(this._vStripeEffect){this._vStripes.clear()}if(this._hStripeEffect){this._hStripes.clear()}g("#gallery-tooltip").remove();this._$obj.empty();this._$obj.append(this._$cloneDom)};u.prototype.updateChanges=function(){this.init()};u.prototype.setEffect=function(J){this._globalEffect=J};u.prototype.setTextAlign=function(J){this._textAlign=J};u.prototype.setCaptionType=function(J){this._displayTooltip=(J=="tooltip")};u.prototype.setThumbsAlign=function(J){this._thumbsAlign=J};u.prototype.setPlayButton=function(J){this._displayPlayBtn=J};u.prototype.setDButtons=function(J){this._displayImgBtns=J};u.prototype.setImageNumber=function(J){this._displayImgNum=J};u.prototype.setTimerBar=function(J){this._displayTimer=J};u.prototype.setThumbButtons=function(J){this._displayThumbBtns=J};u.prototype.setThumbNumber=function(J){this._displayThumbInfo=J};u.prototype.setIndexes=function(J){this._displayIndex=J};u.prototype.setSelectArrow=function(J){this._displayArrow=J};u.prototype.setMouseoverText=function(J){this._mouseoverText=window.Touch?false:J};u.prototype.setMouseoverCaptions=function(J){this._mouseoverCaption=window.Touch?false:J};u.prototype.setMouseoverButtons=function(J){this._mouseoverButtons=window.Touch?false:J};u.prototype.setMouseoverInfo=function(J){this._mouseoverInfo=window.Touch?false:J};var A=100;var s=5000;var n=800;var z=800;var y=600;var x=400;var o=250;var c=50;var j=50;var B="top";var m="bottom";var H=0;var I=1;var p="update_content_btns";var D="update_content_info";var k="update_index";var h="update_thumb_btns";var w="update_thumb_info";var r="adjust_thumbs";var C="start_timer";var q="reset_timer";var E="pause_timer";var f=0;var i={"vert.tl":f++,"vert.tr":f++,"vert.bl":f++,"vert.br":f++,"fade.left":f++,"fade.right":f++,"alt.left":f++,"alt.right":f++,"blinds.left":f++,"blinds.right":f++,"vert.random.fade":f++,"horz.tl":f++,"horz.tr":f++,"horz.bl":f++,"horz.br":f++,"fade.top":f++,"fade.bottom":f++,"alt.top":f++,"alt.bottom":f++,"blinds.top":f++,"blinds.bottom":f++,"horz.random.fade":f++,random:f++,fade:f++,"h.slide":f++,"v.slide":f++,none:f++};function d(J){this._$stripes;this._arr;this._total;this._intervalId=null;this._gallery=J;this._areaWidth=J._screenWidth;this._areaHeight=J._screenHeight;this._size=J._vertSize;this._delay=J._vertDelay;this._total=Math.ceil(this._areaWidth/this._size);if(this._total>o){this._size=Math.ceil(this._areaWidth/o);this._total=Math.ceil(this._areaWidth/this._size)}var L="";for(var K=0;K<this._total;K++){L+="<div class='vpiece' id='"+K+"' style='left:"+(K*this._size)+"px; height:"+this._areaHeight+"px'></div>"}this._gallery.addToScreen(L);this._$stripes=this._gallery._$obj.find("div.vpiece");this._arr=this._$stripes.toArray()}d.prototype.clear=function(){clearInterval(this._intervalId);this._$stripes.stop(true).css({"z-index":2,opacity:0})};d.prototype.displayContent=function(J,K){this.setPieces(J,K);if(K==i["vert.random.fade"]){this.animateRandom(J)}else{this.animate(J,K)}};d.prototype.setPieces=function(J,K){switch(K){case i["vert.tl"]:case i["vert.tr"]:this.setVertPieces(J,-this._areaHeight,1,this._size,false);break;case i["vert.bl"]:case i["vert.br"]:this.setVertPieces(J,this._areaHeight,1,this._size,false);break;case i["alt.left"]:case i["alt.right"]:this.setVertPieces(J,0,1,this._size,true);break;case i["blinds.left"]:case i["blinds.right"]:this.setVertPieces(J,0,1,0,false);break;default:this.setVertPieces(J,0,0,this._size,false)}};d.prototype.setVertPieces=function(J,P,Q,L,O){var S=J.attr("src");var R=0;var K=0;if(this._gallery._autoCenter){R=(this._areaHeight-J.height())/2;K=(this._areaWidth-J.width())/2}for(var M=0;M<this._total;M++){var N=((-M*this._size)+K);if(O){P=(M%2)==0?-this._areaHeight:this._areaHeight}this._$stripes.eq(M).css({background:" url('"+S+"') "+N+"px "+R+"px no-repeat",backgroundPositionX:N+"px",backgroundPositionY:R+"px",opacity:Q,top:P,width:L,"z-index":3})}};d.prototype.animate=function(L,M){var N=this;var P,K,O,J;switch(M){case i["vert.tl"]:case i["vert.bl"]:case i["fade.left"]:case i["blinds.left"]:case i["alt.left"]:P=0;K=this._total-1;O=1;break;default:P=this._total-1;K=0;O=-1}this._intervalId=setInterval(function(){N._$stripes.eq(P).animate({top:0,opacity:1,width:N._size},N._gallery._duration,N._gallery._easing,function(){if(g(this).attr("id")==K){N._gallery.showContent(L)}});if(P==K){clearInterval(N._intervalId)}P+=O},this._delay)};d.prototype.animateRandom=function(K){var M=this;t(this._arr);var J=0;var L=0;this._intervalId=setInterval(function(){g(M._arr[J++]).animate({opacity:1},M._gallery._duration,M._gallery._easing,function(){if(++L==M._total){M._gallery.showContent(K)}});if(J==M._total){clearInterval(M._intervalId)}},this._delay)};function v(J){this._$stripes;this._arr;this._total;this._intervalId=null;this._gallery=J;this._areaWidth=J._screenWidth;this._areaHeight=J._screenHeight;this._size=J._horzSize;this._delay=J._horzDelay;this._total=Math.ceil(this._areaHeight/this._size);if(this._total>o){this._size=Math.ceil(this._areaHeight/o);this._total=Math.ceil(this._areaHeight/this._size)}var L="";for(var K=0;K<this._total;K++){L+="<div class='hpiece' id='"+K+"' style='top:"+(K*this._size)+"px; width:"+this._areaWidth+"px'><!-- --></div>"}this._gallery.addToScreen(L);this._$stripes=this._gallery._$obj.find("div.hpiece");this._arr=this._$stripes.toArray()}v.prototype.clear=function(){clearInterval(this._intervalId);this._$stripes.stop(true).css({"z-index":2,opacity:0})};v.prototype.displayContent=function(J,K){this.setPieces(J,K);if(K==i["horz.random.fade"]){this.animateRandom(J)}else{this.animate(J,K)}};v.prototype.setPieces=function(J,K){switch(K){case i["horz.tr"]:case i["horz.br"]:this.setHorzPieces(J,this._areaWidth,1,this._size,false);break;case i["horz.tl"]:case i["horz.bl"]:this.setHorzPieces(J,-this._areaWidth,1,this._size,false);break;case i["alt.top"]:case i["alt.bottom"]:this.setHorzPieces(J,0,1,this._size,true);break;case i["blinds.top"]:case i["blinds.bottom"]:this.setHorzPieces(J,0,1,0,false);break;default:this.setHorzPieces(J,0,0,this._size,false)}};v.prototype.setHorzPieces=function(J,M,P,R,O){var S=J.attr("src");var Q=0;var K=0;if(this._gallery._autoCenter){Q=(this._areaHeight-J.height())/2;K=(this._areaWidth-J.width())/2}for(var N=0;N<this._total;N++){var L=((-N*this._size)+Q);if(O){M=(N%2)==0?-this._areaWidth:this._areaWidth}this._$stripes.eq(N).css({background:" url('"+S+"') "+K+"px "+L+"px no-repeat",backgroundPositionX:K+"px",backgroundPositionY:L+"px",opacity:P,left:M,height:R,"z-index":3})}};v.prototype.animate=function(K,L){var M=this;var O,J,N;switch(L){case i["horz.tl"]:case i["horz.tr"]:case i["fade.top"]:case i["blinds.top"]:case i["alt.top"]:O=0;J=this._total-1;N=1;break;default:O=this._total-1;J=0;N=-1}this._intervalId=setInterval(function(){M._$stripes.eq(O).animate({left:0,opacity:1,height:M._size},M._gallery._duration,M._gallery._easing,function(){if(g(this).attr("id")==J){M._gallery.showContent(K)}});if(O==J){clearInterval(M._intervalId)}O+=N},this._delay)};v.prototype.animateRandom=function(K){var M=this;t(this._arr);var J=0;var L=0;this._intervalId=setInterval(function(){g(M._arr[J++]).animate({opacity:1},M._gallery._duration,M._gallery._easing,function(){if(++L==M._total){M._gallery.showContent(K)}});if(J==M._total){clearInterval(M._intervalId)}},this._delay)};function u(K,J){this._numDisplay=e(J.num_display,5);this._screenWidth=e(J.screen_width,720);this._screenHeight=e(J.screen_height,360);this._thumbWidth=e(J.thumb_width,125);this._thumbHeight=e(J.thumb_height,70);this._contImgNav=J.cont_imgnav;this._contThumbNav=J.cont_thumbnav;this._displayImgBtns=J.display_imgnav;this._displayPlayBtn=J.display_play;this._displayImgNum=J.display_imgnum;this._displayTimer=J.display_timer;this._displayThumbBtns=J.display_thumbnav;this._displayThumbInfo=J.display_thumbnum;this._displayArrow=J.display_arrow;this._displayTooltip=J.display_tooltip;this._displayIndex=J.display_indexes;this._mouseoverPause=window.Touch?false:J.mouseover_pause;this._mouseoverText=window.Touch?false:J.mouseover_text;this._mouseoverInfo=window.Touch?false:J.mouseover_info;this._mouseoverButtons=window.Touch?false:J.mouseover_buttons;this._mouseoverCaption=window.Touch?false:J.mouseover_caption;this._textAlign=J.text_align.toLowerCase();this._captionAlign=J.caption_align.toLowerCase();this._globalEffect=J.transition.toLowerCase();this._globalDelay=e(J.delay,s);this._duration=e(J.transition_speed,z);this._scrollSpeed=e(J.scroll_speed,y);this._moveBy1=J.move_one;this._shuffle=J.shuffle;this._easing=J.easing;this._autoCenter=J.auto_center;this._playOnce=J.rotate_once;this._padding=G(J.padding,0);this._thumbMargin=G(J.thumb_margin,0);this._autoStart=J.auto_rotate;this._vertSize=e(J.vert_size,c);this._horzSize=e(J.horz_size,c);this._vertDelay=e(J.vstripe_delay,A);this._horzDelay=e(J.hstripe_delay,A);this._mousewheelScroll=J.mousewheel_scroll;this._thumbsAlign=J.thumbnails_align.toLowerCase();this._numItems;this._unitSize;this._prevSlots;this._nextSlots;this._maxSlots;this._currIndex;this._prevIndex;this._pos;this._vStripes;this._hStripes;this._rotate;this._delay;this._textOffset;this._selectStyle;this._timerId;this._dir;this._hStripeEffect;this._vStripeEffect;this._slideCoord;this._thumbCoord;this._useFilter;this._$gallery;this._$screen;this._$preloader;this._$mainLink;this._$strip;this._$playBtn;this._$prevBtn;this._$nextBtn;this._$textBox;this._$infoPanel;this._$thumbPanel;this._$thumbList;this._$thumbs;this._$thumbBoxes;this._$cpanel;this._$listBackButton;this._$listFwdButton;this._$thumbInfo;this._$tooltip;this._$indexes;this._$timer;this._$innerText;this._$sPanel;this._$innerInfo;this._$obj=K;this._$cloneDom;this.init()}u.prototype.init=function(){this._$cloneDom=this._$obj.find(">div:first").clone();this._$gallery=this._$obj.find(".wt-gallery");this._$screen=this._$gallery.find(">.main-screen");this._$thumbPanel=this._$gallery.find(".thumbnails");this._$thumbList=this._$thumbPanel.find(">ul");this._$thumbs=this._$thumbList.find(">li");this._numItems=this._$thumbs.size();if(this._shuffle){this.shuffleItems()}this._$thumbBoxes=this._$thumbs.find(">div:first");this._timerId=null;this._currIndex=0;this._prevIndex=-1;this._pos=0;this._useFilter=(jQuery.browser.msie&&parseInt(jQuery.browser.version)>6&&parseInt(jQuery.browser.version)<9);if(this._numItems<=this._numDisplay){this._displayThumbBtns=this._displayIndex=false;this._numDisplay=this._numItems}if(this._displayIndex){this._moveBy1=false}this._hStripeEffect=this._vStripeEffect=false;this.checkEffect(i[this._globalEffect]);this.initScreen();this.initCPanel();this.initItems();var J=this._$screen.outerWidth()>this._$cpanel.outerWidth()?this._$screen.outerWidth():this._$cpanel.outerWidth();var K=this._$screen.outerHeight()+this._$cpanel.outerHeight();this._$gallery.css({width:J,height:K,padding:this._padding});g(document).bind("keyup",{elem:this},this.onKeyPress);this._rotate=false;if(this._autoStart){this._rotate=true;this._$gallery.bind(C,{elem:this},this.startTimer).bind(E,{elem:this},this.pauseTimer).bind(q,{elem:this},this.resetTimer);if(this._mouseoverPause){this._$gallery.bind("mouseenter",{elem:this},this.galleryOver).bind("mouseleave",{elem:this},this.galleryOut)}}else{if(this._displayPlayBtn){this._$gallery.bind(C,{elem:this},this.startTimer).bind(E,{elem:this},this.pauseTimer).bind(q,{elem:this},this.resetTimer)}}if(this._vStripeEffect){this._vStripes=new d(this)}if(this._hStripeEffect){this._hStripes=new v(this)}if(window.Touch){this._slideCoord={start:-1,end:-1};this._thumbCoord={start:-1,end:-1};if(this._globalEffect=="v.slide"){this._$screen.bind("touchstart",{elem:this},this.touchVStart).bind("touchmove",{elem:this},this.touchVMove)}else{this._$screen.bind("touchstart",{elem:this},this.touchStart).bind("touchmove",{elem:this},this.touchMove)}this._$screen.bind("touchend",{elem:this},this.touchEnd);this._$thumbPanel.bind("touchstart",{elem:this},this.thumbsTouchStart).bind("touchmove",{elem:this},this.thumbsTouchMove).bind("touchend",{elem:this},this.thumbsTouchEnd)}else{if(this._mousewheelScroll){this._$screen.bind("mousewheel",{elem:this},this.scrollContent).bind("DOMMouseScroll",{elem:this},this.scrollContent);this._$thumbPanel.bind("mousewheel",{elem:this},this.scrollThumbs).bind("DOMMouseScroll",{elem:this},this.scrollThumbs)}}if(!a(6)){this.loadImg(0)}this.loadContent(this._currIndex);this.updateCPanel()};u.prototype.scrollContent=function(K){var J=K.data.elem;if(!J._$strip.is(":animated")){var L=(typeof K.originalEvent.wheelDelta=="undefined")?-K.originalEvent.detail:K.originalEvent.wheelDelta;L>0?J.prevImg():J.nextImg()}return false};u.prototype.scrollThumbs=function(K){var J=K.data.elem;if(!J._$thumbList.is(":animated")){var L=(typeof K.originalEvent.wheelDelta=="undefined")?-K.originalEvent.detail:K.originalEvent.wheelDelta;L>0?J.prevThumbs():J.nextThumbs()}return false};u.prototype.touchStart=function(J){J.data.elem._slideCoord.start=J.originalEvent.touches[0].pageX};u.prototype.touchMove=function(J){J.preventDefault();J.data.elem._slideCoord.end=J.originalEvent.touches[0].pageX};u.prototype.touchVStart=function(J){J.data.elem._slideCoord.start=J.originalEvent.touches[0].pageY};u.prototype.touchVMove=function(J){J.preventDefault();J.data.elem._slideCoord.end=J.originalEvent.touches[0].pageY};u.prototype.touchEnd=function(K){var J=K.data.elem;if(J._slideCoord.end>=0){if(Math.abs(J._slideCoord.start-J._slideCoord.end)>j){if(J._slideCoord.end<J._slideCoord.start){J.nextImg()}else{J.prevImg()}}}J._slideCoord.start=J._slideCoord.end=-1};u.prototype.thumbsTouchStart=function(K){var J=K.data.elem;J._thumbCoord.start=K.originalEvent.touches[0].pageX};u.prototype.thumbsTouchMove=function(J){J.preventDefault();J.data.elem._thumbCoord.end=J.originalEvent.touches[0].pageX};u.prototype.thumbsTouchEnd=function(K){var J=K.data.elem;if(J._thumbCoord.end>=0){if(Math.abs(J._thumbCoord.start-J._thumbCoord.end)>j){if(J._thumbCoord.end<J._thumbCoord.start){J.nextThumbs()}else{J.prevThumbs()}}}J._thumbCoord.start=J._thumbCoord.end=-1};u.prototype.addToScreen=function(J){this._$mainLink.append(J)};u.prototype.initScreen=function(){var J="<div class='prev-btn'></div>						<div class='play-btn'></div>						<div class='next-btn'></div>						<div class='desc'></div>						<div class='info'>							<div class='s-panel'>								<div class='s-prev'></div>								<div class='s-info'></div>								<div class='s-play'></div>								<div class='s-next'></div>							</div>							<div class='inner-info'></div>							<div class='timer'></div>						</div>						<div class='preloader'></div>";this._$screen.append(J);this._$textBox=this._$screen.find(">.desc");this._$preloader=this._$screen.find(">.preloader");this._$infoPanel=this._$screen.find(">.info");this._$sPanel=this._$infoPanel.find(">.s-panel");this._$screen.css({width:this._screenWidth,height:this._screenHeight});this._textOffset=(a(6)&&this._screenHeight%2!=0)?-1:0;this._$strip=g("<div class='strip'></div>");if(this._globalEffect=="h.slide"){this._$screen.append(this._$strip);this._$strip.css({width:2*this._screenWidth,height:this._screenHeight});this._$thumbs.removeAttr("effect")}else{if(this._globalEffect=="v.slide"){this._$screen.append(this._$strip);this._$strip.css({width:this._screenWidth,height:2*this._screenHeight});this._$thumbs.removeAttr("effect")}else{this._$screen.append("<a href='#'></a>");this._$mainLink=this._$screen.find(">a:first")}}this.initTextBox();if(this._mouseoverButtons){this.initMouseoverButtons()}else{this.initSmallButtons()}this.initInfoPanel();if(this._useFilter){this._$textBox.addClass("ie-rgba");this._$infoPanel.addClass("ie-rgba")}};u.prototype.initSmallButtons=function(){this._$screen.find(">.prev-btn, >.next-btn, >.play-btn").hide();this._$prevBtn=this._$sPanel.find(">.s-prev");this._$nextBtn=this._$sPanel.find(">.s-next");this._$playBtn=this._$sPanel.find(">.s-play");if(this._displayPlayBtn){this._$playBtn.toggleClass("pause",this._autoStart).mousedown(l).bind("click",{elem:this},this.togglePlay)}else{this._$playBtn.hide()}if(this._displayImgBtns){this._$prevBtn.mousedown(l).bind("click",{elem:this},this.prevImg);this._$nextBtn.mousedown(l).bind("click",{elem:this},this.nextImg);if(!this._contImgNav){this._$gallery.bind(p,{elem:this},this.updateImgBtns)}}else{this._$prevBtn.hide();this._$nextBtn.hide()}};u.prototype.initMouseoverButtons=function(){this._$sPanel.find(">.s-prev, >.s-next, >.s-play").hide();this._$prevBtn=this._$screen.find(">.prev-btn");this._$nextBtn=this._$screen.find(">.next-btn");this._$playBtn=this._$screen.find(">.play-btn");if(this._displayPlayBtn){this._$playBtn.toggleClass("pause",this._autoStart).bind("click",{elem:this},this.togglePlay);var L=this;this._$screen.hover(function(){L._$playBtn.stop(true,true).fadeIn(x)},function(){L._$playBtn.stop(true,true).fadeOut(x)})}else{this._$playBtn.hide()}if(this._displayImgBtns){var J=0;var K=this._screenWidth-this._$nextBtn.width();this._$prevBtn.data({offset:-this._$prevBtn.width(),pos:J}).css({left:this._$prevBtn.data("offset"),visibility:"visible"}).mousedown(l).bind("click",{elem:this},this.prevImg);this._$nextBtn.data({offset:this._screenWidth,pos:K}).css({left:this._$nextBtn.data("offset"),visibility:"visible"}).mousedown(l).bind("click",{elem:this},this.nextImg);this._$screen.bind("mouseenter",{elem:this},this.displayDButtons).bind("mouseleave",{elem:this},this.hideDButtons);if(!this._contImgNav){this._$gallery.bind(p,{elem:this},this.updateImgBtns)}}else{this._$prevBtn.hide();this._$nextBtn.hide()}};u.prototype.displayDButtons=function(K){var J=K.data.elem;J._$prevBtn.stop().animate({left:J._$prevBtn.data("pos")},x);J._$nextBtn.stop().animate({left:J._$nextBtn.data("pos")},x)};u.prototype.hideDButtons=function(K){var J=K.data.elem;J._$prevBtn.stop().animate({left:J._$prevBtn.data("offset")},x);J._$nextBtn.stop().animate({left:J._$nextBtn.data("offset")},x)};u.prototype.updateImgBtns=function(K){var J=K.data.elem;J._$prevBtn.toggleClass("off",J._currIndex==0);J._$nextBtn.toggleClass("off",J._currIndex==J._numItems-1)};u.prototype.initTextBox=function(){var K,J;if(this._textAlign==m){K=m;J=this._textOffset}else{K=B;J=0}this._$textBox.data("align",K).append("<div class='inner-text'></div>");this._$innerText=this._$textBox.find("div.inner-text");if(this._mouseoverText){this._$textBox.css(K,-this._$textBox.height()+J);this._$screen.data("hover",false).bind("mouseenter",{elem:this},this.displayText).bind("mouseleave",{elem:this},this.hideText)}else{this._$textBox.css(K,J)}};u.prototype.updateText=function(){var L=this._$thumbs.eq(this._currIndex).find("div.data>div:first").html();var J=this._$thumbs.eq(this._currIndex).data("textHeight");if(this._mouseoverText&&!this._$screen.data("hover")){this._$textBox.stop(true).css(this._$textBox.data("align"),-J).height(J);this._$innerText.html(L)}else{this._$innerText.html("");var K=this;this._$textBox.stop(true).animate({height:J},x,function(){K._$innerText.css("opacity",0).html(L).animate({opacity:1},x)})}};u.prototype.displayText=function(K){var J=K.data.elem;J._$screen.data("hover",true);J._$textBox.stop(true,true).animate(J._$textBox.data("align")==B?{top:0}:{bottom:J._textOffset},x)};u.prototype.hideText=function(K){var J=K.data.elem;J._$screen.data("hover",false);J._$textBox.stop(true,true).animate(J._$textBox.data("align")==B?{top:-J._$textBox.height()}:{bottom:-J._$textBox.height()+J._textOffset},x)};u.prototype.initInfoPanel=function(){this._$timer=this._$infoPanel.find(">.timer").data("pct",1);if(!this._displayImgNum&&!this._displayTimer&&!(this._displayPlayBtn&&this._displayImgBtns&&!this._mouseoverButtons)){this._$infoPanel.hide();return}var N,M;if(this._$textBox.data("align")==B){N=m;M=this._textOffset}else{N=B;M=0}this._$infoPanel.data("align",N).css("visibility","visible");if(this._mouseoverInfo){this._$infoPanel.css(N,-this._$infoPanel.height()+M);this._$screen.bind("mouseenter",{elem:this},this.displayInfo).bind("mouseleave",{elem:this},this.hideInfo)}else{this._$infoPanel.css(N,M)}this._$innerInfo=this._$infoPanel.find(".inner-info");if(this._displayImgNum){this._$gallery.bind(D,{elem:this},this.updateImgInfo)}else{this._$innerInfo.hide()}if(this._displayTimer){this._$timer.css("visibility","visible")}if(this._displayImgNum){if((!this._displayPlayBtn&&!this._mouseoverButtons)||this._mouseoverButtons){this._$innerInfo.hide();this._$innerInfo=this._$sPanel.find(">.s-info");var K=F(this._numItems);var L="";for(var J=0;J<K;J++){L+="0"}this._$innerInfo.html(L+" / "+L).width(this._$innerInfo.width()).html("")}}this._$sPanel.css("marginLeft",-this._$sPanel.width()/2)};u.prototype.displayInfo=function(K){var J=K.data.elem;J._$infoPanel.stop().animate((J._$infoPanel.data("align")==m)?{bottom:J._textOffset}:{top:0},x)};u.prototype.hideInfo=function(K){var J=K.data.elem;J._$infoPanel.stop().animate((J._$infoPanel.data("align")==m)?{bottom:-J._$infoPanel.height()+J._textOffset}:{top:-J._$infoPanel.height()},x)};u.prototype.updateImgInfo=function(K){var J=K.data.elem;J._$innerInfo.html((J._currIndex+1)+" / "+J._numItems)};u.prototype.initItems=function(){var L=this._$thumbs.find(">div:first>p:first");if(this._useFilter){L.addClass("ie-rgba")}if(this._displayTooltip){L.hide();this._$tooltip=g("<div id='gallery-tooltip'></div>").append("<div class='tt-txt'></div>");g("body").append(this._$tooltip);if(this._captionAlign==B){this._$tooltip.data("bottom",false).addClass("txt-up")}else{this._$tooltip.data("bottom",true).addClass("txt-down")}if(a(6)){this._$tooltip.css("background-image","none").find(":only-child").css("margin",0)}}else{var N=L.outerWidth()-L.width();L.width(this._thumbWidth-N)}for(var Q=0;Q<this._numItems;Q++){var T=this._$thumbs.eq(Q);var K=T.find(">div:first");var M=K.find(">a:first");var J=M.find("img");var P=K.find(">p:first");var R=T.find(">div.data>div:first");var S=(R.length>0&&R.html()!="")?this._$innerText.html(R.html()).outerHeight():0;var O=i[T.attr("effect")];if((typeof O=="undefined")||O==i["h.slide"]||O==i["v.slide"]){O=i[this._globalEffect]}else{this.checkEffect(O)}T.data({imgurl:M.attr("href"),caption:P.html(),effect:O,delay:e(T.attr("delay"),this._globalDelay),textHeight:S});J[0].complete||J[0].readyState=="complete"?this.processImg(J):J.bind("load",{elem:this},this.processLoadedImg);if(P.length>0&&P.html()!=""){if(this._displayTooltip){K.bind("mouseenter",{elem:this},this.showTooltip).bind("mouseleave",{elem:this},this.hideTooltip).bind("mousemove",{elem:this},this.moveTooltip)}else{if(this._mouseoverCaption){K.bind("mouseenter",{elem:this},this.displayCaption).bind("mouseleave",{elem:this},this.hideCaption);P.css("top",this._captionAlign==m?this._thumbHeight:-P.outerHeight())}else{P.css("top",this._captionAlign==m?this._thumbHeight-P.outerHeight():0)}}}}this._$innerText.html("");this._$textBox.css("visibility","visible")};u.prototype.selectItem=function(M){var L=M.data.elem;var J=g(M.target).parents("li").eq(0);var K=J.index();if(K>=0&&K!=L._currIndex){L._dir=K<L._currIndex?H:I;L._$gallery.trigger(q);L._prevIndex=L._currIndex;L._currIndex=K;L.loadContent(L._currIndex)}return false};u.prototype.displayCaption=function(K){var J=K.data.elem;var L=g(this).find(">p:first");L.stop().animate({top:(J._captionAlign==m)?J._thumbHeight-L.outerHeight():0},300)};u.prototype.hideCaption=function(K){var J=K.data.elem;var L=g(this).find(">p:first");L.stop().animate({top:(J._captionAlign==m)?J._thumbHeight:-L.outerHeight()},300)};u.prototype.showTooltip=function(L){var K=L.data.elem;var J=g(this).parent().data("caption");var M=K._$tooltip.data("bottom")?0:-K._$tooltip.outerHeight(true);K._$tooltip.find(">div.tt-txt").html(J);K._$tooltip.css({top:L.pageY+M,left:L.pageX}).stop(true,true).delay(n).fadeIn(300)};u.prototype.moveTooltip=function(K){var J=K.data.elem;var L=J._$tooltip.data("bottom")?0:-J._$tooltip.outerHeight(true);J._$tooltip.css({top:K.pageY+L,left:K.pageX})};u.prototype.hideTooltip=function(J){J.data.elem._$tooltip.stop(true,true).fadeOut(0)};u.prototype.initCPanel=function(){var K=this;this._$cpanel=this._$gallery.find(".cpanel");if(this._thumbsAlign==B){this._$gallery.prepend(this._$cpanel);this._$thumbBoxes.css("marginTop",0)}else{this._$thumbBoxes.css("marginBottom",0)}this._$thumbBoxes.css({width:this._thumbWidth,height:this._thumbHeight});this._$thumbs.css({"margin-right":this._thumbMargin});this._unitSize=this._$thumbs.outerWidth(true);this._$thumbPanel.css({width:(this._numDisplay*this._$thumbBoxes.outerWidth())+((this._numDisplay-1)*this._thumbMargin),height:this._$thumbBoxes.outerHeight(true)}).bind("click",{elem:this},this.selectItem).bind("mouseenter",function(){K._$gallery.unbind(r)}).bind("mouseleave",function(){K._$gallery.unbind(r).bind(r,{elem:K},K.moveThumbs)});var J;if(this._displayIndex){J=this._numDisplay*Math.ceil(this._numItems/this._numDisplay)}else{J=this._numItems}this._$thumbList.width(J*this._unitSize);this._maxSlots=J-this._numDisplay;this._prevSlots=0;this._nextSlots=this._maxSlots;this.initThumbButtons();this.initIndexBar();if(!this._displayIndex&&!this._displayThumbBtns){this._moveBy1=true;this._contThumbNav=false;this._$thumbBoxes.bind("click",{elem:this},this.itemMove)}this._selectStyle=this._displayArrow?(this._thumbsAlign==B?"down-arrow":"up-arrow"):"curr";this._$cpanel.css({width:this._$thumbPanel.outerWidth()+this._$listBackButton.outerWidth()+this._$listFwdButton.outerWidth(),height:this._$thumbPanel.outerHeight()+this._$cpanel.find(".cbar").outerHeight()});this._$gallery.bind(r,{elem:this},this.moveThumbs)};u.prototype.initThumbButtons=function(){this._$listBackButton=this._$cpanel.find(".thumbs-back");this._$listFwdButton=this._$cpanel.find(".thumbs-fwd");if(this._displayThumbBtns){var J=this._$thumbBoxes.outerHeight();var K=this._$thumbBoxes.css("margin-top");this._$listBackButton.css({height:J,marginTop:K}).mousedown(l).bind("click",{elem:this},this.prevThumbs);this._$listFwdButton.css({height:J,marginTop:K}).mousedown(l).bind("click",{elem:this},this.nextThumbs);if(!this._contThumbNav){this._$gallery.bind(h,{elem:this},this.updateThumbBtns)}}else{this._$listBackButton.remove();this._$listFwdButton.remove()}};u.prototype.initIndexBar=function(){if(this._displayIndex||this._displayThumbInfo){var O="<div class='cbar'><div class='thumb-info'></div></div>";if(this._thumbsAlign==B){this._$cpanel.prepend(O)}else{this._$cpanel.append(O)}}else{return}var N=this._$cpanel.find(".cbar").css({width:this._$thumbPanel.outerWidth(),"margin-left":this._$listBackButton.outerWidth(),"margin-right":this._$listFwdButton.outerWidth()});if(this._displayThumbInfo){this._$thumbInfo=this._$cpanel.find(".thumb-info");this._$gallery.bind(w,{elem:this},this.updateThumbInfo);if(!this._displayIndex){this._$thumbInfo.css("width","100%")}}else{this._$cpanel.find(".thumb-info").hide()}if(this._displayIndex){var Q=Math.ceil(this._numItems/this._numDisplay);var P="<div class='index-panel'>";for(var M=0;M<Q;M++){var K=M*this._numDisplay;var J=Math.min(K+this._numDisplay,this._numItems);P+="<div class='index' title='"+((K+1)+"-"+J)+"'></div>"}P+="</div>";if(this._thumbsAlign==B){N.prepend(P)}else{N.append(P)}this._$indexes=N.find(".index").mousedown(l).bind("click",{elem:this},this.goToIndex);this._$gallery.bind(k,{elem:this},this.updateIndexes);var L=N.find(".index-panel");L.css({"padding-left":Math.floor((N.width()-L.width())/2)})}};u.prototype.updateCPanel=function(){this._$gallery.trigger(k).trigger(w).trigger(h)};u.prototype.updateIndexes=function(L){var K=L.data.elem;var J=Math.ceil(K._prevSlots/K._numDisplay);K._$indexes.filter(".index-hl").removeClass("index-hl");K._$indexes.eq(J).addClass("index-hl")};u.prototype.updateThumbInfo=function(L){var K=L.data.elem;var M=-(K._pos/K._unitSize);var J=Math.min(M+K._numDisplay,K._numItems);K._$thumbInfo.html((M+1)+" - "+J+" of "+K._numItems)};u.prototype.updateThumbBtns=function(L){var K=L.data.elem;var M=Math.abs(K._pos/K._unitSize);var J=M+K._numDisplay;K._$listBackButton.toggleClass("off",M<=0);K._$listFwdButton.toggleClass("off",J>=K._numItems)};u.prototype.togglePlay=function(K){var J=K.data.elem;J._rotate=!J._rotate;if(J._rotate){g(this).addClass("pause");J._$gallery.trigger(C)}else{g(this).removeClass("pause");J._$gallery.trigger(E)}};u.prototype.prevImg=function(K){var J=(typeof K!="undefined")?K.data.elem:this;if(J._currIndex>0){J._prevIndex=J._currIndex;J._currIndex--}else{if(J._contImgNav){J._prevIndex=J._currIndex;J._currIndex=J._numItems-1}else{return}}J._dir=H;J._$gallery.trigger(q);J.loadContent(J._currIndex);J._$gallery.trigger(r);return false};u.prototype.nextImg=function(K){var J=(typeof K!="undefined")?K.data.elem:this;if(J._currIndex<J._numItems-1){J._prevIndex=J._currIndex;J._currIndex++}else{if(J._contImgNav){J._prevIndex=J._currIndex;J._currIndex=0}else{return}}J._dir=I;J._$gallery.trigger(q);J.loadContent(J._currIndex);J._$gallery.trigger(r);return false};u.prototype.prevThumbs=function(L){var K=(typeof L!="undefined")?L.data.elem:this;if(K._nextSlots<K._maxSlots){var J=K._moveBy1?1:Math.min(K._maxSlots-K._nextSlots,K._numDisplay);K._nextSlots+=J;K._prevSlots-=J}else{if(K._contThumbNav){K._nextSlots=0;K._prevSlots=K._maxSlots}else{return}}K.moveList();return false};u.prototype.nextThumbs=function(L){var K=(typeof L!="undefined")?L.data.elem:this;if(K._prevSlots<K._maxSlots){var J=K._moveBy1?1:Math.min(K._maxSlots-K._prevSlots,K._numDisplay);K._prevSlots+=J;K._nextSlots-=J}else{if(K._contThumbNav){K._prevSlots=0;K._nextSlots=K._maxSlots}else{return}}K.moveList();return false};u.prototype.moveList=function(){this._pos=-this._prevSlots*this._unitSize;this._$thumbList.stop(true,true).animate({left:this._pos},this._scrollSpeed);this.updateCPanel()};u.prototype.itemMove=function(L){var K=L.data.elem;var J=(g(this).parents("li").eq(0).index()-K._prevSlots)%K._numDisplay;if(J+1==K._numDisplay){K.nextThumbs()}else{if(J==0){K.prevThumbs()}}};u.prototype.moveThumbs=function(K){var J=K.data.elem;J._prevSlots=Math.floor(J._currIndex/J._numDisplay)*J._numDisplay;if(!J._displayIndex&&J._prevSlots>J._maxSlots){J._prevSlots=J._maxSlots}J._nextSlots=J._maxSlots-J._prevSlots;J.moveList()};u.prototype.goToIndex=function(K){var J=K.data.elem;J._prevSlots=g(this).index()*J._numDisplay;J._nextSlots=J._maxSlots-J._prevSlots;J.moveList();return false};u.prototype.galleryOver=function(K){var J=K.data.elem;J._rotate=false;J._$playBtn.removeClass("pause");J._$gallery.trigger(E)};u.prototype.galleryOut=function(K){var J=K.data.elem;J._rotate=true;J._$playBtn.addClass("pause");J._$gallery.trigger(C)};u.prototype.pauseLast=function(J){if(J==this._numItems-1){this._rotate=false;this._$playBtn.removeClass("pause");this._$gallery.trigger(E)}};u.prototype.loadContent=function(M){if(this._playOnce){this.pauseLast(M)}var K=this._$thumbs.eq(M);this._$thumbs.filter("."+this._selectStyle).removeClass(this._selectStyle);K.addClass(this._selectStyle);this._delay=K.data("delay");if(this._$mainLink){var O=K.find("div.data>a");var J=O.attr("href");if(J){this._$mainLink.unbind("click",l).css({cursor:"pointer"}).attr({href:J,target:O.attr("target")})}else{this._$mainLink.click(l).css({cursor:"default"})}}this._$gallery.trigger(D).trigger(p);this.updateText();if(K.data("img")){this._$preloader.hide();this.displayContent(K.data("img"))}else{var L=g("<img class='main-img'/>");var N=this;L.load(function(){N._$preloader.hide();N.storeImg(K,g(this));N.displayContent(g(this))}).error(function(){alert("Error loading image")});this._$preloader.show();L.attr("src",K.data("imgurl"))}};u.prototype.displayContent=function(J){if(this._vStripeEffect){this._vStripes.clear()}if(this._hStripeEffect){this._hStripes.clear()}if(this._vStripeEffect||this._hStripeEffect){this.setPrevious()}var K=this._$thumbs.eq(this._currIndex).data("effect");if(K==i.none||(typeof K=="undefined")){this.showContent(J);return}else{if(K==i.fade){this.fadeInContent(J);return}else{if(K==i["h.slide"]){this.slideContent(J,"left",this._screenWidth);return}else{if(K==i["v.slide"]){this.slideContent(J,"top",this._screenHeight);return}}}}if(K==i.random){K=Math.floor(Math.random()*(f-5))}if(K<=i["vert.random.fade"]){this._vStripes.displayContent(J,K)}else{if(K<=i["horz.random.fade"]){this._hStripes.displayContent(J,K)}}};u.prototype.setPrevious=function(){if(this._prevIndex>=0){var K=this._$mainLink.find("img#curr-img").attr("src");var L=this._$thumbs.eq(this._prevIndex).data("imgurl");if(K!=L){this._$mainLink.find("img.main-img").attr("id","").hide();var J=this._$mainLink.find("img.main-img").filter(function(){return g(this).attr("src")==L});J.eq(0).show()}}};u.prototype.showContent=function(J){this._$mainLink.find("img.main-img").attr("id","").hide();J.attr("id","curr-img").show();this._$gallery.trigger(C)};u.prototype.fadeInContent=function(J){this._$mainLink.find("img#curr-img").stop(true,true);this._$mainLink.find("img.main-img").attr("id","").css("z-index",0);var K=this;J.attr("id","curr-img").css("z-index",1).stop(true,true).fadeIn(this._duration,function(){K._$mainLink.find("img.main-img:not('#curr-img')").hide();K._$gallery.trigger(C)})};u.prototype.slideContent=function(O,Q,N){this._$strip.stop(true,true);var J=this._$strip.find("#curr-img");if(J.size()>0){this._$strip.find(".main-img").attr("id","").parents(".content-box").css({top:0,left:0});O.attr("id","curr-img").parents(".content-box").show();var L,K;if(this._dir==H){this._$strip.css(Q,-N);L=J;K=0}else{L=O;K=-N}L.parents(".content-box").css(Q,N);var P=(Q=="top")?{top:K}:{left:K};var M=this;this._$strip.stop(true,true).animate(P,this._duration,this._easing,function(){M._$strip.find(".main-img:not('#curr-img')").parents(".content-box").hide();L.parents(".content-box").css({top:0,left:0});M._$strip.css({top:0,left:0});M._$gallery.trigger(C)})}else{this._$strip.css({top:0,left:0});this._$strip.find(".main-img").parents(".content-box").hide().css({top:0,left:0});O.attr("id","curr-img").parents(".content-box").show();this._$gallery.trigger(C)}};u.prototype.processLoadedImg=function(J){J.data.elem.processImg(g(this))};u.prototype.processImg=function(J){var K;if(J.outerWidth()>this._thumbWidth){K=J.outerHeight()/J.outerWidth();J.width(this._thumbWidth);J.height(K*this._thumbWidth)}if(J.outerHeight()>this._thumbHeight){K=J.outerWidth()/J.outerHeight();J.width(K*this._thumbHeight);J.height(this._thumbHeight)}J.css({left:Math.round((this._thumbWidth-J.outerWidth())/2),top:Math.round((this._thumbHeight-J.outerHeight())/2)})};u.prototype.loadImg=function(K){try{var J=this._$thumbs.eq(K);var M=g("<img class='main-img'/>");var N=this;M.load(function(){if(!J.data("img")){N.storeImg(J,g(this))}K++;if(K<N._numItems){N.loadImg(K)}}).error(function(){K++;if(K<N._numItems){N.loadImg(K)}});M.attr("src",J.data("imgurl"))}catch(L){}};u.prototype.storeImg=function(L,M){if(this._globalEffect=="h.slide"||this._globalEffect=="v.slide"){this._$strip.append(M);this.centerImg(M);var J=g("<div class='content-box'></div>").css({width:this._screenWidth,height:this._screenHeight});M.wrap(J);M.css("display","block");var K=L.find("div.data>a");if(K){M.wrap(K)}}else{this._$mainLink.append(M);this.centerImg(M)}L.data("img",M)};u.prototype.centerImg=function(K){if(this._autoCenter&&K.width()>0&&K.height()>0){var L=(this._screenHeight-K.height())/2;var J=(this._screenWidth-K.width())/2;K.css({top:L,left:J})}};u.prototype.shuffleItems=function(){var M=new Array(this._numItems);for(var L=0;L<this._numItems;L++){var J=Math.floor(Math.random()*this._numItems);var K=this._$thumbs.eq(L);M[L]=this._$thumbs.eq(J);M[J]=K}for(var L=0;L<this._numItems;L++){this._$thumbList.append(M[L])}this._$thumbs=this._$thumbList.find(">li")};u.prototype.startTimer=function(L){var K=L.data.elem;if(K._rotate&&K._timerId==null){var J=Math.round(K._$timer.data("pct")*K._delay);K._$timer.animate({width:(K._screenWidth+1)},J,"linear");K._timerId=setTimeout(function(){K._dir=I;K._prevIndex=K._currIndex;K._currIndex=(K._currIndex<K._numItems-1)?K._currIndex+1:0;K._$gallery.trigger(q);K.loadContent(K._currIndex);K._$gallery.trigger(r)},J)}};u.prototype.resetTimer=function(K){var J=K.data.elem;clearTimeout(J._timerId);J._timerId=null;J._$timer.stop(true).width(0).data("pct",1)};u.prototype.pauseTimer=function(L){var J=L.data.elem;clearTimeout(J._timerId);J._timerId=null;var K=1-(J._$timer.width()/(J._screenWidth+1));J._$timer.stop(true).data("pct",K)};u.prototype.checkEffect=function(J){if(J==i.random){this._hStripeEffect=this._vStripeEffect=true}else{if(J<=i["vert.random.fade"]){this._vStripeEffect=true}else{if(J<=i["horz.random.fade"]){this._hStripeEffect=true}}}};u.prototype.onKeyPress=function(K){var J=K.data.elem;switch(K.keyCode){case 37:J.prevImg();break;case 39:J.nextImg();break}};function l(){return false}function a(J){if(jQuery.browser.msie&&parseInt(jQuery.browser.version)<=J){return true}return false}function t(J){var N=J.length;for(var M=0;M<N;M++){var K=Math.floor(Math.random()*N);var L=J[M];J[M]=J[K];J[K]=L}}function e(J,K){if(!isNaN(J)&&J>0){return J}return K}function G(J,K){if(!isNaN(J)&&J>=0){return J}return K}function F(J){var K=1;J=Math.abs(J);J=parseInt(J/10);while(J>0){K++;J=parseInt(J/10)}return K}g.fn.wtGallery=function(L){var K={num_display:5,screen_width:720,screen_height:360,padding:10,thumb_width:125,thumb_height:70,thumb_margin:5,text_align:B,caption_align:m,auto_rotate:true,delay:s,rotate_once:false,auto_center:true,cont_imgnav:true,cont_thumbnav:true,display_play:true,display_imgnav:true,display_imgnum:true,display_thumbnav:true,display_thumbnum:false,display_arrow:true,display_tooltip:false,display_timer:true,display_indexes:true,mouseover_pause:false,mouseover_text:false,mouseover_info:false,mouseover_caption:true,mouseover_buttons:true,transition:"h.slide",transition_speed:z,scroll_speed:y,vert_size:c,horz_size:c,vstripe_delay:A,hstripe_delay:A,move_one:false,shuffle:false,easing:"",mousewheel_scroll:true,thumbnails_align:m};var J=g.extend({},K,L);return this.each(function(){b=new u(g(this),J)})}})(jQuery);